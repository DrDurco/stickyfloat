/**
 * stickyfloat - jQuery plugin for verticaly floating anything in a constrained area
 *
 * @author          Yair Even-Or (vsync)
 * @copyright       Copyright (c) 2012
 * @license         MIT and GPL licenses.
 * @link            http://dropthebit.com
 * @version         Version 6
 *
 **/
(function(d){function f(a){return{startOffset:a.parent().offset().top,offsetY:parseInt(a.parent().css("padding-top"))}}var i=d(document),h,j,k,l,c;defaults={duration:200,lockBottom:!0,delay:0,easing:"linear",stickToBottom:!1,cssTransition:!1};var g;a:{g=document.body.style;for(var m="ms Khtml O Moz Webkit ".split(" ");m.length;)if(""==g[m.pop()+"Transition"]){g=!0;break a}g=!1}supportsTransitions=g;Sticky=function(a,c){this.settings=a;this.obj=d(c)};Sticky.prototype={init:function(){var a=this;this.onScroll= function(){a.rePosition()};d(window).ready(function(){a.rePosition(!0);d(window).on("scroll.sticky",a.onScroll)});this.obj.data("_stickyfloat",a)},rePosition:function(a,g){var e=this.obj,b=this.settings,f=b.duration;a&&(f=0);e.stop();h=e.parent().height()-e.outerHeight()+b.offsetY;0>h&&(h=0);j=i.scrollTop()>b.startOffset;k=e.offset().top>b.startOffset;l=e.outerHeight()<d(window).height();if(j||k&&l||g)c=b.stickToBottom?i.scrollTop()+d(window.top).height()-e.outerHeight()-b.startOffset-b.offsetY:i.scrollTop()- b.startOffset+b.offsetY,c>h&&b.lockBottom&&(c=h),c<b.offsetY?c=b.offsetY:i.scrollTop()<b.startOffset&&!b.stickToBottom&&(c=b.offsetY),5>f||b.cssTransition&&supportsTransitions?e.css("top",c):e.stop().delay(b.delay).animate({top:c},f,b.easing)},update:function(a){if("object"===typeof a){if(!a.offsetY||"auto"==a.offsetY)a.offsetY=f(this.obj).offsetY;if(!a.startOffset||"auto"==a.startOffset)a.startOffset=f(this.obj).startOffset;this.settings=d.extend({},this.settings,a);this.rePosition(!1,!0)}return this.obj}, destroy:function(){d(window).off("scroll.sticky",this.onScroll);this.obj.removeData();return this.obj}};d.fn.stickyfloat=function(a,c){if("object"===typeof a)c=a;else if("string"===typeof a)return this.data("_stickyfloat")&&"function"==typeof this.data("_stickyfloat")[a]?this.data("_stickyfloat")[a](c):this;return this.each(function(){var a=d(this),b=d.extend({},defaults,f(a),c||{});(new Sticky(b,a)).init()})}})(jQuery);